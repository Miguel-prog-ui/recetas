<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recetas Deliciosas</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='presentacion.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <a href="/acceso_publico" class="home-btn">
                        <span class="home-icon"><i class="fas fa-home"></i></span>
                    </a>
                    <div class="logo-text">Recetas Deliciosas</div>
                </div>
                <div class="header-right">
                    {% if session.usuario %}
                    <div class="user-menu-container">
                        <div class="user-avatar" onclick="toggleUserMenu()">
                            <div class="avatar-circle">
                                <span class="avatar-initial">{{ session.usuario[0] | upper }}</span>
                            </div>
                            <span class="user-name">{{ session.usuario }}</span>
                            <span class="dropdown-arrow"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="user-dropdown-menu" id="userDropdownMenu">
                            <div class="dropdown-header">
                                <div class="user-info-dropdown">
                                    <div class="avatar-circle small">
                                        <span class="avatar-initial">{{ session.usuario[0] | upper }}</span>
                                    </div>
                                    <div class="user-details">
                                        <span class="welcome-text">Hola, {{ session.usuario }}! 👋</span>
                                        <span class="user-email">{{ session.usuario }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="{{ url_for('perfil') }}" class="dropdown-item">
                                <span class="item-icon"><i class="fas fa-user"></i></span>
                                <span class="item-text">Mi Perfil</span>
                            </a>
                            <a href="{{ url_for('editar_perfil') }}" class="dropdown-item">
                                <span class="item-icon"><i class="fas fa-cog"></i></span>
                                <span class="item-text">Editar Perfil</span>
                            </a>
                            <a href="{{ url_for('recetas_favoritas') }}" class="dropdown-item">
                                <span class="item-icon"><i class="fas fa-heart"></i></span>
                                <span class="item-text">Recetas Favoritas</span>
                            </a>
                            <a href="{{ url_for('mis_recetas') }}" class="dropdown-item">
                                <span class="item-icon"><i class="fas fa-book"></i></span>
                                <span class="item-text">Mis Recetas</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="{{ url_for('logout') }}" class="dropdown-item logout-item">
                                <span class="item-icon"><i class="fas fa-sign-out-alt"></i></span>
                                <span class="item-text">Cerrar Sesión</span>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <a href="{{ url_for('mostrar_login') }}" class="login-btn">Iniciar sesión</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Sección Hero -->
        <section class="hero">
            <div class="hero-content">
                <h1>Descubre Sabores Únicos</h1>
                <p>Explora nuestra colección de recetas cuidadosamente seleccionadas, desde bebidas refrescantes hasta platos de alta cocina que deleitarán tu paladar.</p>
                <div class="hero-decoration">
                    <div class="decoration-item"></div>
                    <div class="decoration-item"></div>
                    <div class="decoration-item"></div>
                </div>
            </div>
        </section>

        <!-- Sección de Categorías -->
        <section class="categories">
            <h2 class="section-title">Categorías</h2>
            <div class="category-grid">
                <a href="{{ url_for('mostrar_bebidas') }}" class="category-card" onclick="selectCategory('bebidas', this)">
                    <div class="category-icon">
                        <i class="fas fa-glass-whiskey"></i>
                    </div>
                    <h3>Bebidas</h3>
                    <p>Refrescantes jugos, smoothies y bebidas saludables para cualquier momento del día</p>
                </a>
                
                <a href="{{ url_for('mostrar_bebidas_alcoholicas') }}" class="category-card" onclick="selectCategory('alcoholicas', this)">
                    <div class="category-icon">
                        <i class="fas fa-cocktail"></i>
                    </div>
                    <h3>Bebidas Alcohólicas</h3>
                    <p>Cócteles clásicos y modernos, vinos y licores para ocasiones especiales</p>
                </a>
                
                <a href="{{ url_for('mostrar_postres') }}" class="category-card" onclick="selectCategory('postres', this)">
                    <div class="category-icon">
                        <i class="fas fa-ice-cream"></i>
                    </div>
                    <h3>Postres</h3>
                    <p>Dulces tentaciones, pasteles y desserts que endulzarán tu día</p>
                </a>
                
                <a href="{{ url_for('mostrar_comidas') }}" class="category-card" onclick="selectCategory('comidas', this)">
                    <div class="category-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h3>Comidas</h3>
                    <p>Platos principales nutritivos y deliciosos para toda la familia</p>
                </a>
                
                <a href="{{ url_for('mostrar_alta_cocina') }}" class="category-card" onclick="selectCategory('alta-cocina', this)">
                    <div class="category-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <h3>Alta Cocina</h3>
                    <p>Recetas gourmet y técnicas culinarias para los más exigentes</p>
                </a>

                <a href="{{ url_for('mostrar_comunidad') }}" class="category-card" onclick="selectCategory('comunidad', this)">
                    <div class="category-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Recetas de la Comunidad</h3>
                    <p>Recetas compartidas por nuestros usuarios, con sabores auténticos y creativos</p>
                </a>
            </div>
        </section>

        <!-- Sección de Recetas Destacadas -->
        <section class="recipes-section">
            <div class="container">
                <h2 class="section-title">Recetas Destacadas</h2>
                <div class="recipes-grid" id="recipesGrid"></div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#about">Acerca de</a>
                    <a href="#contact">Contacto</a>
                    <a href="#privacy">Privacidad</a>
                    <a href="#terms">Términos</a>
                </div>
                <p>&copy; 2024 Recetas Deliciosas. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // 🔥 FUNCIONES DEL MENÚ DE USUARIO
        function toggleUserMenu() {
            const menu = document.getElementById('userDropdownMenu');
            menu.classList.toggle('active');
        }

        // Cerrar el menú al hacer clic fuera de él
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu-container');
            const menu = document.getElementById('userDropdownMenu');
            
            if (userMenu && !userMenu.contains(event.target)) {
                menu.classList.remove('active');
            }
        });

        // Cerrar menú al hacer scroll
        window.addEventListener('scroll', function() {
            const menu = document.getElementById('userDropdownMenu');
            if (menu) {
                menu.classList.remove('active');
            }
        });

        // ========== FUNCIONES PARA LIKES (SOLO DISEÑO - NO FUNCIONALES) ==========

        // FUTURO: Implementar sistema de likes real
        function handleLike(recipeName) {
            // FUTURO: Conectar con backend para dar like
            // fetch(`/dar_like/${recipeId}`, { method: 'POST' })
            // .then(response => response.json())
            // .then(data => {
            //     actualizarContadorLikes(recipeId, data.nuevoTotal);
            // });
            
            // Por ahora solo muestra mensaje
            alert(`Función de "Me gusta" para "${recipeName}" estará disponible próximamente`);
            
            // Efecto visual temporal
            const likeBtn = event.target.closest('.like-btn');
            if (likeBtn) {
                const likeCount = likeBtn.querySelector('.like-count');
                if (likeCount) {
                    const currentLikes = parseInt(likeCount.textContent);
                    likeCount.textContent = currentLikes + 1;
                }
                
                likeBtn.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    likeBtn.style.transform = 'scale(1)';
                }, 200);
            }
        }

        // FUTURO: Implementar sistema de favoritos real
        function handleFavorite(recipeName) {
            // FUTURO: Conectar con backend para agregar a favoritos
            alert(`Función de "Favoritos" para "${recipeName}" estará disponible próximamente`);
            
            // Efecto visual temporal
            const favBtn = event.target.closest('.favorite-btn');
            if (favBtn) {
                favBtn.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    favBtn.style.transform = 'scale(1)';
                }, 200);
            }
        }

        // ========== FUNCIONES EXISTENTES DE RECETAS ==========
        const recipes = {
            bebidas: [
                { name: "Smoothie de Mango", time: "5 min", difficulty: "Fácil", icon: "🥭", description: "Refrescante smoothie tropical con mango, yogurt y miel" },
                { name: "Limonada de Menta", time: "10 min", difficulty: "Fácil", icon: "🍋", description: "Bebida refrescante con limón fresco y hojas de menta" },
                { name: "Té Helado de Frutas", time: "15 min", difficulty: "Fácil", icon: "🧊", description: "Té negro con frutas frescas y hielo" }
            ],
            alcoholicas: [
                { name: "Mojito Clásico", time: "8 min", difficulty: "Medio", icon: "🍸", description: "Cóctel cubano con ron blanco, menta y lima" },
                { name: "Margarita de Fresa", time: "10 min", difficulty: "Medio", icon: "🍓", description: "Margarita refrescante con fresas naturales" },
                { name: "Sangría Española", time: "20 min", difficulty: "Fácil", icon: "🍷", description: "Vino tinto con frutas frescas y especias" }
            ],
            postres: [
                { name: "Tiramisú Clásico", time: "45 min", difficulty: "Medio", icon: "🍰", description: "Postre italiano con café, mascarpone y cacao" },
                { name: "Cheesecake de Frutos Rojos", time: "60 min", difficulty: "Medio", icon: "🍓", description: "Tarta de queso cremosa con salsa de frutos rojos" },
                { name: "Crème Brûlée", time: "40 min", difficulty: "Difícil", icon: "🔥", description: "Postre francés con crema y azúcar caramelizada" }
            ],
            comidas: [
                { name: "Paella Valenciana", time: "45 min", difficulty: "Medio", icon: "🥘", description: "Arroz tradicional español con pollo y verduras" },
                { name: "Lasaña Boloñesa", time: "90 min", difficulty: "Medio", icon: "🍝", description: "Pasta italiana en capas con carne y bechamel" },
                { name: "Salmón a la Plancha", time: "25 min", difficulty: "Fácil", icon: "🐟", description: "Filete de salmón con hierbas y limón" }
            ],
            "alta-cocina": [
                { name: "Foie Gras Sellado", time: "30 min", difficulty: "Difícil", icon: "🦆", description: "Hígado de pato con reducción de oporto" },
                { name: "Risotto de Trufa", time: "35 min", difficulty: "Difícil", icon: "🍄", description: "Arroz cremoso con trufa negra y parmesano" },
                { name: "Beef Wellington", time: "120 min", difficulty: "Muy Difícil", icon: "🥩", description: "Solomillo envuelto en hojaldre con duxelles" }
            ],
            comunidad: [
                { name: "Ensalada de la Abuela", time: "20 min", difficulty: "Fácil", icon: "🥗", description: "Receta familiar con ingredientes frescos de la huerta" },
                { name: "Pastel de Papa Casero", time: "60 min", difficulty: "Medio", icon: "🥔", description: "Comida reconfortante compartida por nuestra comunidad" },
                { name: "Sopa de Calabaza", time: "40 min", difficulty: "Fácil", icon: "🎃", description: "Receta vegana compartida por nuestros usuarios" }
            ]
        };

        let currentCategory = null;

        function selectCategory(category, element) {
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('active');
            });
            
            element.classList.add('active');
            
            currentCategory = category;
            loadRecipes(category);
        }

        function loadRecipes(category) {
            const recipesGrid = document.getElementById('recipesGrid');
            const categoryRecipes = recipes[category] || [];
            
            recipesGrid.innerHTML = categoryRecipes.map(recipe => `
                <div class="recipe-card" onclick="viewRecipe('${recipe.name}')">
                    <div class="recipe-image">
                        <span class="recipe-icon">${recipe.icon}</span>
                    </div>
                    <div class="recipe-content">
                        <h4>${recipe.name}</h4>
                        <div class="recipe-meta">
                            <span><i class="fas fa-clock"></i> ${recipe.time}</span>
                            <span><i class="fas fa-chart-bar"></i> ${recipe.difficulty}</span>
                        </div>
                        <p class="recipe-description">${recipe.description}</p>
                        
                        <!-- SISTEMA DE LIKES - Solo diseño por ahora -->
                        <div class="recipe-actions-preview">
                            <div class="like-section">
                                <button class="like-btn" onclick="event.stopPropagation(); handleLike('${recipe.name}')">
                                    <span class="like-icon"><i class="fas fa-heart"></i></span>
                                    <span class="like-count">0</span>
                                </button>
                                <span class="like-text">Me gusta</span>
                            </div>
                            <div class="favorite-section">
                                <button class="favorite-btn" onclick="event.stopPropagation(); handleFavorite('${recipe.name}')">
                                    <span class="favorite-icon"><i class="fas fa-star"></i></span>
                                </button>
                                <span class="favorite-text">Favorito</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.querySelector('.section-title').textContent = 'Recetas Destacadas';
        }

        function viewRecipe(recipeName) {
            alert(`¡Próximamente podrás ver la receta completa de: ${recipeName}!`);
        }

        // Animación para las tarjetas al cargar
        document.addEventListener('DOMContentLoaded', function() {
            const categoryCards = document.querySelectorAll('.category-card');
            categoryCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 200 * index);
            });

            // Cargar la primera categoría por defecto
            const firstCategory = document.querySelector('.category-card');
            if (firstCategory) {
                selectCategory('bebidas', firstCategory);
            }
        });
    </script>
</body>
</html>